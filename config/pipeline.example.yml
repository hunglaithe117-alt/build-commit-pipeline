environment: local

paths:
  uploads: /app/data/uploads
  exports: /app/data/exports
  dead_letter: /app/data/dead_letter
  sonar_instances_config: /app/sonar-scan/sonar_instances.example.json
  default_workdir: /app/data/sonar-work
  travistorrent_root: /data/travistorrent

mongo:
  uri: mongodb://travis:travis@mongo:27017
  database: travistorrent_pipeline
  options:
    authSource: admin

redis:
  url: redis://redis:6379/0
  default_queue: pipeline.default
  dead_letter_queue: pipeline.dlq

pipeline:
  ingestion_chunk_size: 250
  resume_failed_commits: true
  default_retry_limit: 5
  csv_encoding: utf-8

sonarqube:
  webhook_secret: change-me
  webhook_public_url: http://localhost:8000/api/sonar/webhook
  default_instance: primary
  instances:
    - name: primary
      host: http://sonarqube1:9000
      token_env: SONARQUBE_TOKEN_PRIMARY
      scanner_bin: sonar-scanner
    - name: secondary
      host: http://sonarqube2:9000
      token_env: SONARQUBE_TOKEN_SECONDARY
      scanner_bin: sonar-scanner
  measures:
    keys:
      - bugs
      - vulnerabilities
      - code_smells
      - sqale_index
      - coverage
      - duplicated_lines_density
      - complexity
      - cognitive_complexity
      - ncloc
      - files
      - functions
      - comment_lines_density
      - alert_status
      - quality_gate_details
    chunk_size: 25
    output_format: csv

storage:
  data_sources_collection: data_sources
  jobs_collection: jobs
  sonar_runs_collection: sonar_runs
  dead_letter_collection: dead_letters
  outputs_collection: outputs
  instance_locks_collection: instance_locks

web:
  base_url: http://localhost:3000
